import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,e as n,o as e}from"./app-DMt8XYCe.js";const l="/assets/image-20250122005739801-B3iEHBRK.png",t="/assets/image-20250122012012869-nYMkFmoR.png",h="/assets/image-20250122195631414-BLk4jCDb.png",k="/assets/image-20250124013939657-3fDgDAxs.png",p="/assets/image-20250123201028070-BfCjL6_D.png",d="/assets/image-20250123201217351-DsZsuOjC.png",r="/assets/image-20250124004618041-BMdjZ6ep.png",g="/assets/image-20250124005353324-Bdlgd5de.png",A="/assets/image-20250124010422437-CIjC_ncT.png",B="/assets/image-20250124011219589-CzRrCf5S.png",c={};function o(y,i){return e(),a("div",null,i[0]||(i[0]=[n('<h1 id="sast-c-group-winter-of-code-getting-started" tabindex="-1"><a class="header-anchor" href="#sast-c-group-winter-of-code-getting-started"><span>SAST C# Group Winter Of Code | Getting Started</span></a></h1><h2 id="环境配置" tabindex="-1"><a class="header-anchor" href="#环境配置"><span>环境配置</span></a></h2><ul><li><u><strong>操作系统:</strong></u> Windows 11 / Windows 10 20H2 or newer ( &gt;10.0.19041.0 ) ( x64 or ARM64 ) <ul><li>不支持其它操作系统，并且极大概率不能通过 Wine 及其它模拟层运行</li></ul></li><li><strong><u>IDE:</u></strong> Visual Studio 2022 17.12 or newer <ul><li>Rider 对 WinUI 3 项目支持很差，可能会出现 <strong>无法调试/运行、XAML代码补全/语法检查不可用</strong> 等问题。</li><li>Visual Studio Code 支持比 Rider 更烂。</li></ul></li><li><u><strong>Visual Studio 工作负载:</strong></u> 保证勾选<code>Windows 应用程序开发</code>。如果你的设备尚未安装Git for Windows，可以在 单个组件 中找到它。</li></ul><h2 id="获取代码" tabindex="-1"><a class="header-anchor" href="#获取代码"><span>获取代码</span></a></h2><ol><li><p>Fork <a href="https://github.com/NJUPT-SAST-Csharp/Winter-Of-Code-2024" target="_blank" rel="noopener noreferrer">NJUPT-SAST-Csharp/Winter-Of-Code-2024</a> 仓库到你的账户中。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>如果在2025/1/24以前已经Fork过了，请在你Fork的仓库中点击上方的Sync Fork按钮，更新分支。</p><p>我们发布了一些关于后端连接的 bugfix</p></div><figure><img src="'+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p>以你喜欢的方式Clone你Fork后的新仓库。<strong>请不要使用 Download ZIP！</strong></p><ul><li><p>命令行<code>git clone **从仓库页面&gt;Code&gt;Clone&gt;HTTPS或者SSH栏复制的链接**</code></p><p>会将仓库克隆至工作目录下的<code>Winter-Of-Code-2024</code></p></li><li><p>GitHub Desktop / Visual Studio 2022</p></li><li><p>GitHub CLI</p></li></ul><p><strong>在Clone前请确认仓库地址是你Fork后的新仓库</strong>，而不是<code>NJUPT-SAST-Csharp/Winter-Of-Code-2024</code></p><p>此步骤很可能需要你有合理的网络加速手段，如果可以，<strong>请将代理软件的TUN模式/通透代理模式打开</strong>，或者去学习<strong>为Git设置代理</strong>的正确姿势。</p></li><li><p>打开仓库文件夹，找到<code>Winter-Of-Code-2024.sln</code>，使用Visual Studio 2022即可打开项目。</p></li></ol><h2 id="编译、部署-运行" tabindex="-1"><a class="header-anchor" href="#编译、部署-运行"><span>编译、部署&amp;运行</span></a></h2><p>打开项目后，确认启动项目为 <code>SastImg.Client (Package)</code> 。（如果出现无法启动的问题，那么很有可能你选择了错误的启动项目）</p><p>按下<code>F5</code>即可编译+部署+调试，初次启动可能会花费很长时间还原 NuGet 包（大约会在硬盘上存储数百MB的包缓存），并且没有任何进度条或状态提示，请耐心等待。还原 NuGet 包只会经历一次，在此后的开发过程中，你通常不会再经历这一可能漫长的过程。根据组内其它人测试，此步骤不需要任何网络加速手段即可顺利完成（多亏了微软在境内部署的镜像服务器）。</p><p>不出意外的话，你将能看到只有基础代码的程序启动，以及它的主界面：</p><figure><img src="'+t+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>在右上角的用户头像处可以登录，鼠标在上方悬浮即可展开面板。目前创建了两个用户：<code>test</code> 密码<code>123456</code> 和管理员权限的用户：<code>admin</code> 密码<code>123456</code>。显示登录成功Dialog就表明我部署在Azure上的服务还没欠费（)</p><h2 id="关于sast-image" tabindex="-1"><a class="header-anchor" href="#关于sast-image"><span>关于SAST Image</span></a></h2><p>SAST Image 是一套图库系统，由前任组长完成（虽然没有完全完工，这次或许可以当作集成测试（？），所以出现任何调用API的异常欢迎询问我或其它组员）。</p><p>你可以访问 <a href="https://github.com/NJUPT-SAST-Csharp/SAST-Image-Re" target="_blank" rel="noopener noreferrer">NJUPT-SAST-Csharp/SAST-Image-Re: Continuation of SAST-Image, which is combination of SastImg Frontend and Backend.</a> 并给它一个可爱的Star～(∠・ω&lt; )⌒★。本次项目所使用的小幅修改版后端位于该仓库的<code>Shirasagi0012/Winter-Of-Code</code>分支下。</p><h3 id="功能" tabindex="-1"><a class="header-anchor" href="#功能"><span>功能</span></a></h3><ul><li>用户相关： <ul><li>登录&amp;注册，修改密码&amp;用户名</li><li>用户头像、用户主页头图、用户简介</li></ul></li><li>图片管理相关： 按照 分类 -&gt; 相册 -&gt; 图片 的分类管理。并且每个图片可以拥有一个/多个标签。 <ul><li>分类 Category：一个分类由名字和描述组成。 <ul><li>（<strong>仅限管理员</strong>）创建分类，修改分类的名字和描述</li><li>获取全部分类</li></ul></li><li>相册 Album：一个相册由标题、描述、创建者的用户ID、所属的分类和其它人的访问权限构成。 <ul><li>删除与恢复最近删除的相册</li><li>修改访问权限，标题，描述，协作者，封面等</li><li>获取一个分类下有哪些相册</li><li>创建相册</li></ul></li><li>图片 Image：一个图片由图像（原图和自动生成的缩略图）、标题、标签、点赞数、点赞者组成 <ul><li>向相册添加图片，删除图片与恢复最近删除的图片</li><li>下载图片原图或缩略图</li><li>获取一个相册里有哪些图片</li><li>点赞和取消点赞</li></ul></li><li>标签 Tag：一个标签由它的名字组成 <ul><li>创建，删除标签，修改一个标签的名字</li></ul></li></ul></li></ul><p>其中，不同的分类、相册、图片、标签各自使用唯一存在的数字ID标识（是一个<code>long</code>型的数字）。</p><h3 id="webapi" tabindex="-1"><a class="header-anchor" href="#webapi"><span>WebAPI</span></a></h3><p>这些功能均已实现在后端中，提供了一套REST风格的WebAPI以供客户端使用。本次Winter Of Code项目的SAST Image桌面客户端正是通过调用后端提供的WebAPI来完成以上功能。本次WOC<u><strong>并不需要</strong>你具有WebAPI甚至后端开发相关知识</u>，但是了解WebAPI是什么，以及Query、Body、Path分别是啥，如何调用WebAPI，对理解和解决某些bug有很大帮助。</p><p>在项目的Services\\API文件夹中，有自动生成的后端WebAPI的本地调用接口。你可以访问 <a href="http://sastwoc2024.shirasagi.space:5265/scalar/SastImgApi" target="_blank" rel="noopener noreferrer">SAST Image | Scalar API Reference</a> 以了解所有API，它们与在Services\\API文件夹中接口内的函数一一对应，并且后者具有注释。</p><h2 id="开始开发" tabindex="-1"><a class="header-anchor" href="#开始开发"><span>开始开发</span></a></h2><h3 id="需求" tabindex="-1"><a class="header-anchor" href="#需求"><span>需求</span></a></h3><p>**<u>尽可能多</u>**的在客户端中实现SAST Image后端提供的功能。当然，你需要优先着手完成其中更重要的功能：</p><h4 id="主要功能" tabindex="-1"><a class="header-anchor" href="#主要功能"><span>主要功能</span></a></h4><ul><li>图片浏览 <ul><li>可以列出相册，并且能展示相册内的所有图片</li></ul></li><li>上传图片</li><li>创建相册</li><li>修改相册和图片的描述，标签，分类</li></ul><h4 id="一些细小的功能" tabindex="-1"><a class="header-anchor" href="#一些细小的功能"><span>一些细小的功能</span></a></h4><ul><li>注册账号</li><li>应用左上角的返回按钮现在不起作用，请编写代码实现返回功能 <ul><li>Tips: ShellPage 中的 TitleBar 有 BackButtonClick 事件。Frame 有自带的返回方法</li></ul></li><li>右上角用户头像处还不能显示用户的头像，可以通过对 ExpandableUserAvatar 进行扩展实现。</li><li>查看和修改用户资料</li></ul><p>通过考核并不需要你像个超人一样完成全部功能，我觉得把以上的功能实现得七七八八就非常好了（）</p><h3 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start"><span>Quick Start</span></a></h3><p>在这一节，我将带着各位完成一个基础功能——获取指定ID的图片，并把它显示在界面上的<code>&lt;Image&gt;</code>控件里。这一部分更多的是帮助各位理解整个框架是怎么work的，而不是像主仓库那样的基础代码。</p><h4 id="准备工作" tabindex="-1"><a class="header-anchor" href="#准备工作"><span>准备工作</span></a></h4><ol><li><p>按照前述说明，成功运行目前的基础框架代码。</p></li><li><p>安装 <a href="https://apps.microsoft.com/detail/9P3JFPWWDZRC?hl=en-us&amp;gl=US&amp;ocid=pdpshare" target="_blank" rel="noopener noreferrer">WinUI 3 Gallery | Microsoft Store</a> 和 <a href="https://apps.microsoft.com/detail/9NBLGGH4TLCQ?hl=en-us&amp;gl=US&amp;ocid=pdpshare" target="_blank" rel="noopener noreferrer">CommunityToolkit Gallery | Microsoft Store</a>。前者提供了WinUI 3的部分设计规范和多数控件的demo以及对应的代码；后者是Windows Community Toolkit，一个社区开发的用于补充 UWP / WinUI / Uno 的工具包，的文档，为WinUI 3提供了一些重要但缺失的功能和控件。</p></li><li><p>参考资料：微软编写的Windows应用开发文档。<a href="https://learn.microsoft.com/zh-cn/windows/apps/develop/" target="_blank" rel="noopener noreferrer">开发 Windows 桌面应用 - Windows apps | Microsoft Learn</a></p><p>关于设计规范、控件用法等内容主要在“设计”章节内。在WinUI 3 Gallery应用中的控件demo页面可以跳转到文档中对应的页面。</p></li></ol><h4 id="添加页面" tabindex="-1"><a class="header-anchor" href="#添加页面"><span>添加页面</span></a></h4><h5 id="添加navigationviewitem" tabindex="-1"><a class="header-anchor" href="#添加navigationviewitem"><span>添加<code>NavigationViewItem</code></span></a></h5><p>目前左侧导航栏有三个按钮，主页，设置，和跳转到GitHub。在这一节中，我将演示如何向导航栏添加一个打开新页面的按钮。</p><p>导航栏的XAML在<code>ShellPage.xaml</code>中，和整个主界面大多数元素一样。<code>&lt;NavigationView&gt;</code>是导航栏的主体，你可以自行查询它的用法。导航栏的按钮分为上半部分的<code>MenuItems</code>和下半部分的<code>FooterMenuItems</code>。在<code>MenuItems</code>依葫芦画瓢添加一个<code>测试页面</code>的按钮：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ...&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationView.MenuItems</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationViewItem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationViewItem</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;测试页面&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            Tag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Test&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationViewItem.Icon</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">FontIcon</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Glyph</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#D19A66;">&amp;</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">#xE789</span><span style="--shiki-light:#50A14F;--shiki-dark:#D19A66;">;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationViewItem.Icon</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationViewItem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationView.MenuItems</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationView.FooterMenuItems</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Frame</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> x:Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainFrame&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NavigationView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于图标，你可以在<a href="winui3gallery://item/Iconography" target="_blank" rel="noopener noreferrer">WiUI 3 Gallery - Iconography Sample</a> 查看所有图标（如果你已经安装WinUI 3 Gallery，点击该链接可以直接跳转），右下角有图标对应的字形。</p><p>Tag是用来标识<code>NavigationView</code>中的每一个Item的，稍后会用上。它是<code>object</code>类型，可以放任何东西，这里为方便使用设置为&quot;Test&quot;字符串。</p><p>此时运行，应当可以看见左侧多了一个按钮。点击它界面不会有任何反应，也不会切换到新页面。接下来完成切换新页面的代码</p><h5 id="页面切换" tabindex="-1"><a class="header-anchor" href="#页面切换"><span>页面切换</span></a></h5><p>首先得有一个新页面。创建一个叫<code>TestView</code>的新页面，以及它对应的ViewModel，并且为便于实现数据绑定，ViewModel需要继承自<code>ObservableObject</code>。你可以在<a href="https://apps.microsoft.com/detail/9NKLCF1LVZ5H?hl=en-us&amp;gl=US&amp;ocid=pdpshare" target="_blank" rel="noopener noreferrer">MVVM Toolkit Sample App | Microsoft Store</a>中学习如何使用<code>CommunityToolkit.MVVM</code>工具包。</p><p>我们要在<code>NavigationView</code>中按下按钮时切换页面。这里已经监听了<code>NavigationView</code>的<code>ItemInvoked</code>事件，来到<code>ShellPage.xaml</code>的后台代码，依葫芦画瓢添加切换页面的逻辑。这里需要使用前面的Tag来区分选择的是哪个页面。</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> NavigationView_ItemInvoked</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationView</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> sender</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationViewItemInvokedEventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ( </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">InvokedItemContainer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> is </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationViewItem</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        switch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ( </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Tag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     // ...</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Test&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                MainFrame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Navigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TestView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                break</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，点击按钮时，会使<code>MainFrame</code>切换到<code>TestView</code>。</p><h5 id="完成testview" tabindex="-1"><a class="header-anchor" href="#完成testview"><span>完成<code>TestView</code></span></a></h5><p>这个<code>TestView</code>将用于获取所有的图片的ID（通过<code>App.API.Image.GetImagesAsync()</code>这一方法），以供选择某一张图片，然后切换到展示图片的另一个页面（稍后完成）。因此，我们需要一个列表用于展示所有获取到的图片ID，可以使用<code>ListView</code>这一控件。</p><p>首先，我们要在ViewModel中实现获取图片列表的逻辑：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> partial</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TestViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ObservableObject</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ObservableCollection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ImageDto</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#ABB2BF;">Images</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [];</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    [</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ObservableProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ImageDto</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> selectedImage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetAllImagesAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        Images</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Clear</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> imagesRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> await </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">App</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">API</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetImagesAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">imagesRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">IsSuccessful</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 如果获取失败，返回 false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> image</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> imagesRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            Images</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里使用 <code>ObservableCollection</code>，以在更新列表的时候提供更新通知。由<code>GetImagesAsync</code>产生的请求的Content为<code>ImageDto</code>类型，当光标在<code>var</code>处时按F12可以快速跳转至定义。</p><p>接着完成界面。这里只给出核心的<code>&lt;ListView&gt;</code>部分。记得在后台代码new一个ViewModel并且作为属性暴露出来。</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ListView</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ItemsSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{x:Bind ViewModel.Images}&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> SelectedItem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{x:Bind ViewModel.SelectedImage, Mode=TwoWay}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ListView.ItemTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DataTemplate</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> xmlns:api</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;using:SastImg.Client.Service.API&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> x:DataType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;api:ImageDto&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">StackPanel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">TextBlock</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{x:Bind Title}&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Style</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{ThemeResource SubtitleTextBlockStyle}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">TextBlock</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{x:Bind UploadedAt}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">TextBlock</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;{x:Bind Id}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">StackPanel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DataTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ListView.ItemTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ListView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这时打开程序，切换到测试页面，应该就能看见获取的图片列表了。（可能需要登录）</p><p>花了20分钟稍微完善一下（留给你们了）：</p><figure><img src="`+h+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="显示图片" tabindex="-1"><a class="header-anchor" href="#显示图片"><span>显示图片</span></a></h4><p>在获取到图片ID后，接下来我们要把它显示出来，可以使用<a href="winui3gallery://item/Image" target="_blank" rel="noopener noreferrer"><code>&lt;Image&gt;</code>控件</a>。</p><p>在一个新页面<code>ImageView.xaml</code>里面展示图片：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Image</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> x:Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Stretch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Uniform&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       HorizontalAlignment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Stretch&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> VerticalAlignment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Stretch&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来完成它的ViewModel。它的ViewModel需要实现从后端取得需要的图片。使用一个可观察属性存储图像数据，还有一个获取指定ID图片的方法，这个方法使用<code>GetImageAsync</code>获取图片的原图(kind参数为0)或缩略图（为1）。</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ObservableProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Byte</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]? </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">imageData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ShowImageAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">long</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> imageResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> await </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">App</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">API</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetImageAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">imageResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">IsSuccessful</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    using</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> m</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MemoryStream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    await </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">imageResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CopyToAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    ImageData</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToArray</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在后台代码中，我们要实现当ViewModel里的图像数据更新时，将<code>&lt;Image&gt;</code>更新为这个图像。那么怎样触发更新呢？之前我们使用<code>x:Bind</code>，会自动使用<code>ObservableProperty</code>的更新机制，现在我们需要手动利用它。很简单，只需要注册<code>ObservableObject</code>的事件<code>PropertyChanged</code>即可（这就是为什么ViewModel通常继承自<code>ObservableObject</code>，或者使用<code>CommunityToolkit.Mvvm</code>的<code>[ObservableObject]</code>特性激活源生成器生成对应代码。）</p><p>在构造函数中注册一个异步事件处理函数：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">PropertyChanged</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> +=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">sender</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">PropertyName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nameof(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ImageData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 如果属性的名字是“ImageData”</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        await </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">UpdateImageAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中的<code>UpdateImageAsync</code>是用来将<code>Byte[] ImageData</code>解码为<code>Image</code>能接受的<code>BitmapImage</code>，并且设置<code>Image</code>的图片。</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Task</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UpdateImageAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ImageData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> is </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        img</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Source</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> s</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MemoryStream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ImageData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> bitmap</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BitmapImage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    await </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">bitmap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetSourceAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AsRandomAccessStream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    img</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Source</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> bitmap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>目前，我们还没有让这个页面知道应该显示哪张图片。我在这里会实现从<code>TestView</code>的列表里选择一张图，然后自动跳转至<code>ImageView</code>，显示该ID的图片。为此，我们需要实现这个ID在两个页面之间的传递。目前，这些页面都处在一个<code>Frame</code>中，而<code>Frame</code>本身就提供了这一功能。<code>Page</code>有几个函数：</p><ul><li><code>protected virtual void OnNavigatedTo(NavigationEventArgs e)</code> : 在页面卸载并且不再是<code>Frame</code>的当前页面之后立即调用。</li><li><code>protected virtual void OnNavigatedFrom(NavigationEventArgs e)</code> : 在页面被加载并且成为<code>Frame</code>的当前页面时立即调用。</li><li><code>protected virtual void OnNavigatingFrom(NavigatingCancelEventArgs e)</code> : 在页面卸载并且不再是<code>Frame</code>的当前页面<strong>前一刻</strong>调用。</li><li>没有<code>OnNavigatingTo</code></li></ul><p><code>Frame</code>的<code>Navigate</code>函数（前面用过）支持传递参数，这个参数将会保存在<code>NavigationEventArgs</code>的<code>Parameter</code>属性里，可以通过重写以上三个方法获取。</p><p>为了在切换到<code>ImageView</code>时获取接下来要传递的ID，我们需要重写<code>ImageView</code>的<code>OnNavigatedTo</code>方法：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> override</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> OnNavigatedTo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">NavigationEventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parameter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> is </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ImageModel</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> isSuccess</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> await </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ShowImageAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="导航到新页面" tabindex="-1"><a class="header-anchor" href="#导航到新页面"><span>导航到新页面</span></a></h4><p>完成了页面的编码，接下来要实现导航到这个新页面。由于需要传递参数，很显然不能以导航栏的按钮为入口。我们以点击<code>ListView</code>中展示的图片信息为入口跳转到<code>ImageView</code>，使用<code>Frame.Navigate</code>方法。</p><h5 id="获取frame" tabindex="-1"><a class="header-anchor" href="#获取frame"><span>获取<code>Frame</code></span></a></h5><p>首先我们需要拿到<code>ShellPage</code>里的<code>Frame</code>，会稍微有些麻烦。一种解决办法是在App类中添加一个静态的ShellPage引用：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ShellPage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">? </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Shell</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后在创建窗口时，使用这个ShellPage：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Shell</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ShellPage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">MainWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Window</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    SystemBackdrop</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MicaBackdrop</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    Title</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;SAST Image&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    Content</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Shell</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在XAML里定义的对象默认是private的，我们需要把<code>MainFrame</code>变成public或internal的：</p><p>在<code>ShellPage.xaml</code>中找到MainFrame，修改它：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Frame</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> x:Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MainFrame&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> x:FieldModifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;public&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>接下来就可以使用<code>App.Shell.MainFrame</code>访问它了。</p><h5 id="导航" tabindex="-1"><a class="header-anchor" href="#导航"><span>导航</span></a></h5><p>使用ListView的ItemClick事件即可，很简单：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> image_list_ItemClick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> sender</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ItemClickEventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ClickedItem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> is not </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ImageDto</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 点击的对象是ImageDto的话（因为ClickItem是object类型的，</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                 // 为保险需要提前判断一下，并把它转换成ImageDto c）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    App</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Shell</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">MainFrame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Navigate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ImageView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 除了页面类型，还可以传递参数！</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>还需要设置ListView的<code>IsItemClickEnabled</code>为True。</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ListView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">x:Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;image_list&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ItemClick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;image_list_ItemClick&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> IsItemClickEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;True&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="返回原来的页面" tabindex="-1"><a class="header-anchor" href="#返回原来的页面"><span>返回原来的页面</span></a></h4><p>进入<code>ImageView</code>后，暂时没有办法返回原来的页面（左上角那个返回按钮的逻辑没有完成，交给你们了）。<code>Frame</code>提供了<code>GoBack</code>方法，可以返回上一个页面。我们可以在<code>ImageView</code>中添加一个按钮，实现返回。</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Grid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Width</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;48&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Height</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;48&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Margin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;24&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Canvas.ZIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;3&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            VerticalAlignment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Top&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> HorizontalAlignment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Left&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            Click</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Button_Click&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			Back</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Image</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> x:Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Stretch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Uniform&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Canvas.ZIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                   HorizontalAlignment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Stretch&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> VerticalAlignment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Stretch&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Grid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个按钮被放置在左上角，设置了外边距以使其稍远离边缘。接着设置它的点击事件：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Button_Click</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> sender</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RoutedEventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">App</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Shell</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">MainFrame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CanGoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 先判断能否返回</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        App</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Shell</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">MainFrame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GoBack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>花了20分钟稍微完善一下（留给你们了）：</p><figure><img src="`+k+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="调试" tabindex="-1"><a class="header-anchor" href="#调试"><span>调试</span></a></h3><p>到此，我已经带着各位完成了一些基础功能，这些代码会在我自己Fork的仓库中放着<a href="https://github.com/Shirasagi0012/Winter-Of-Code-2024" target="_blank" rel="noopener noreferrer">Shirasagi0012/Winter-Of-Code-2024: The base code of NJUPT SAST C# Group&#39;s WOC 2024</a>。<u>这些代码只是供你参考，而非是让你基于此继续完成。</u>当然，你可以自由使用这些代码。</p><p>有一些调试的技巧：</p><ol><li><p><strong>善用断点</strong></p><p>比如网络请求有时会挂掉，导致报错，你可以在判断请求是否完成的地方加一个断点，然后观察变量的值：</p><figure><img src="'+p+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>对于<code>IApiResponse</code>（也就是所有请求的返回类型)，它如果出错了，可以在其Error属性中看见具体的错误，便于你排除错误。</p><p>如果你嫌断点太多，总是中断，可以为断点设置条件：</p><figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>右键一个断点即可为其设置条件，比如这个断点我设置了只有当IsSuccessful为false时中断，便于查看错误信息。</p></li><li><p><strong>获取某些含糊不清的报错的真相</strong></p><p>由于WinUI 3作为Windows平台原生的UI框架，它是非托管的，应用通过WinRT API来使用它。在编程时不大能感知到这一点，因为CsWinRT等部件已经为我们完成了所有相关的代码生成和自动封送等，让你能拿到的所有东西都是托管世界中的，但是当报错发生时就不一定了（笑）。</p><p>如果WinUI 3框架调用了你的代码（比如XAML里声明一个元素，框架去调用该对象的构造函数），而你的代码抛出了异常，这个异常会先被封送到非托管代码中，然后等它被你的程序捕获时，很可能只有一些看不懂的信息（包括但不限于明明有调试器但是程序还是崩溃、COMException、诡异的HResult代码等）。有一些有效的方法可以让你获得真正的错误信息：</p><ul><li><p>打开“输出”窗口。<code>Ctrl+Alt+O</code></p></li><li><p>开启First Chance Exception，在异常发生的第一时刻就捕获它，而不是等它去非托管世界绕一圈再回来，指望框架保留了原来的报错信息。但是这么做会导致程序调试时因异常而频繁暂停，因此只在需要时启用它/设置好条件。</p></li><li><p>启用混合模式调试。在调试设置中开启Enable Native Code Debugging。然后调试时观察输出窗口，可能会多一些报错信息。</p><figure><img src="'+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+g+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>可以看见调试时输出窗口多了一些消息。在非UI线程操作UI界面产生的报错也会在这里显示（开启混合模式调试后）。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>开启混合模式调试会导致热重载失效</p></div></li><li><p>如果你发现报错发生在这里：<br><img src="'+A+'" alt="" loading="lazy"></p><p>很懵逼，不是吗？其实只是它没把错误给你抛出来……。查看<code>e</code>参数的<code>Exception</code>属性，这就是它原本的报错信息。</p><p>想要在错误发生处单步调试/还原现场？</p><ul><li><p>开启First Chance Exception</p></li><li><p>阅读报错堆栈，找到调用者的代码在哪里，然后加个断点</p><figure><img src="'+B+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>比如这个<code>HttpIOException</code>，它实际上是在<code>ShowImageAsyc</code>函数里发生的，你可以去那里加个try catch然后打个断点，查明发生错误的原因。</p></li></ul><p>不得不说能把原本的报错信息藏着也是🍬了（其实输出窗口里面还是会把信息打印出来的）</p></li></ul><p>当然，报错模糊是WinUI 3框架本身的问题，不得不说相比去年同期还是有了不少改善的（去年WOC如果上WinUI 3的话，我大概就要在debug中亖了😇）。</p></li></ol><h2 id="结语" tabindex="-1"><a class="header-anchor" href="#结语"><span>结语</span></a></h2><p>WinUI 3 相关资料可能比较匮乏，主要依靠微软爸爸的文档。其实80%以上的 UWP 资料也适用于 WinUI 3，搜索不到可以换个关键词试试。</p><p>希望这篇因个人原因咕了几天的 Getting Started 能有一些帮助。</p><p>如果在开发过程中遇到诡异的Bug，可联系SAST C#组全体成员，可以优先找我（话说回来24号了还在给基础代码仓库推BugFix，接下来真的不会再出大问题吗）。</p><p>总之，Good luck &amp; Have fun！</p><p>Shirasagi</p>',105)]))}const F=s(c,[["render",o],["__file","getting-started.html.vue"]]),v=JSON.parse(`{"path":"/winter-of-code-2024/getting-started.html","title":"[SAST C#][WOC2024] Getting Started","lang":"zh-CN","frontmatter":{"title":"[SAST C#][WOC2024] Getting Started","license":"CC BY-SA 4.0 International","date":"2025-01-24T00:00:00.000Z","category":["NJUPT SAST 南邮校科协"],"tag":["C#",".NET","WinUI","XAML","Windows"],"description":"SAST C# Group Winter Of Code | Getting Started 环境配置 操作系统: Windows 11 / Windows 10 20H2 or newer ( >10.0.19041.0 ) ( x64 or ARM64 ) 不支持其它操作系统，并且极大概率不能通过 Wine 及其它模拟层运行 IDE: Visual...","head":[["meta",{"property":"og:url","content":"https://blog.shirasagi.space/winter-of-code-2024/getting-started.html"}],["meta",{"property":"og:site_name","content":"Shirasagi's Blog"}],["meta",{"property":"og:title","content":"[SAST C#][WOC2024] Getting Started"}],["meta",{"property":"og:description","content":"SAST C# Group Winter Of Code | Getting Started 环境配置 操作系统: Windows 11 / Windows 10 20H2 or newer ( >10.0.19041.0 ) ( x64 or ARM64 ) 不支持其它操作系统，并且极大概率不能通过 Wine 及其它模拟层运行 IDE: Visual..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-01T06:17:07.000Z"}],["meta",{"property":"article:tag","content":"C#"}],["meta",{"property":"article:tag","content":".NET"}],["meta",{"property":"article:tag","content":"WinUI"}],["meta",{"property":"article:tag","content":"XAML"}],["meta",{"property":"article:tag","content":"Windows"}],["meta",{"property":"article:published_time","content":"2025-01-24T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-01T06:17:07.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"[SAST C#][WOC2024] Getting Started\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-01-24T00:00:00.000Z\\",\\"dateModified\\":\\"2025-03-01T06:17:07.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Shirasagi\\",\\"url\\":\\"https://github.com/shirasagi0012\\"}]}"]]},"headers":[{"level":2,"title":"环境配置","slug":"环境配置","link":"#环境配置","children":[]},{"level":2,"title":"获取代码","slug":"获取代码","link":"#获取代码","children":[]},{"level":2,"title":"编译、部署&运行","slug":"编译、部署-运行","link":"#编译、部署-运行","children":[]},{"level":2,"title":"关于SAST Image","slug":"关于sast-image","link":"#关于sast-image","children":[{"level":3,"title":"功能","slug":"功能","link":"#功能","children":[]},{"level":3,"title":"WebAPI","slug":"webapi","link":"#webapi","children":[]}]},{"level":2,"title":"开始开发","slug":"开始开发","link":"#开始开发","children":[{"level":3,"title":"需求","slug":"需求","link":"#需求","children":[]},{"level":3,"title":"Quick Start","slug":"quick-start","link":"#quick-start","children":[]},{"level":3,"title":"调试","slug":"调试","link":"#调试","children":[]}]},{"level":2,"title":"结语","slug":"结语","link":"#结语","children":[]}],"git":{"createdTime":1739119347000,"updatedTime":1740809827000,"contributors":[{"name":"Shirasagi","username":"Shirasagi","email":"23011330+Shirasagi0012@users.noreply.github.com","commits":2,"url":"https://github.com/Shirasagi"}]},"readingTime":{"minutes":16.77,"words":5030},"filePathRelative":"winter-of-code-2024/getting-started.md","localizedDate":"2025年1月24日","excerpt":"\\n<h2>环境配置</h2>\\n<ul>\\n<li><u><strong>操作系统:</strong></u> Windows 11 / Windows 10 20H2 or newer ( &gt;10.0.19041.0 ) ( x64 or ARM64 )\\n<ul>\\n<li>不支持其它操作系统，并且极大概率不能通过 Wine 及其它模拟层运行</li>\\n</ul>\\n</li>\\n<li><strong><u>IDE:</u></strong> Visual Studio 2022 17.12 or newer\\n<ul>\\n<li>Rider 对 WinUI 3 项目支持很差，可能会出现 <strong>无法调试/运行、XAML代码补全/语法检查不可用</strong> 等问题。</li>\\n<li>Visual Studio Code 支持比 Rider 更烂。</li>\\n</ul>\\n</li>\\n<li><u><strong>Visual Studio 工作负载:</strong></u> 保证勾选<code>Windows 应用程序开发</code>。如果你的设备尚未安装Git for Windows，可以在 单个组件 中找到它。</li>\\n</ul>","autoDesc":true}`);export{F as comp,v as data};
